{"version":3,"file":"format.js","names":["splitHead","str","sep","idx","indexOf","slice","length","unquote","car","charAt","end","isQuoteStart","format","nodes","options","map","node","type","outputNode","tagName","toLowerCase","attributes","formatAttributes","children","content","includePositions","position","attribute","parts","trim","key","value"],"sources":["format.js"],"sourcesContent":["export function splitHead(str, sep) {\n  const idx = str.indexOf(sep)\n  if (idx === -1) return [str]\n  return [str.slice(0, idx), str.slice(idx + sep.length)]\n}\n\nexport function unquote(str) {\n  const car = str.charAt(0)\n  const end = str.length - 1\n  const isQuoteStart = car === '\"' || car === \"'\"\n  if (isQuoteStart && car === str.charAt(end)) {\n    return str.slice(1, end)\n  }\n  return str\n}\n\nexport function format(nodes, options) {\n  return nodes.map((node) => {\n    const type = node.type\n    const outputNode =\n      type === 'element'\n        ? {\n            type,\n            tagName: node.tagName.toLowerCase(),\n            attributes: formatAttributes(node.attributes),\n            children: format(node.children, options),\n          }\n        : { type, content: node.content }\n    if (options.includePositions) {\n      outputNode.position = node.position\n    }\n    return outputNode\n  })\n}\n\nexport function formatAttributes(attributes) {\n  return attributes.map((attribute) => {\n    const parts = splitHead(attribute.trim(), '=')\n    const key = parts[0]\n    const value = typeof parts[1] === 'string' ? unquote(parts[1]) : null\n    return { key, value }\n  })\n}\n"],"mappings":";;;;;;;;;AAAO,SAASA,SAASA,CAACC,GAAG,EAAEC,GAAG,EAAE;EAClC,IAAMC,GAAG,GAAGF,GAAG,CAACG,OAAO,CAACF,GAAG,CAAC;EAC5B,IAAIC,GAAG,KAAK,CAAC,CAAC,EAAE,OAAO,CAACF,GAAG,CAAC;EAC5B,OAAO,CAACA,GAAG,CAACI,KAAK,CAAC,CAAC,EAAEF,GAAG,CAAC,EAAEF,GAAG,CAACI,KAAK,CAACF,GAAG,GAAGD,GAAG,CAACI,MAAM,CAAC,CAAC;AACzD;AAEO,SAASC,OAAOA,CAACN,GAAG,EAAE;EAC3B,IAAMO,GAAG,GAAGP,GAAG,CAACQ,MAAM,CAAC,CAAC,CAAC;EACzB,IAAMC,GAAG,GAAGT,GAAG,CAACK,MAAM,GAAG,CAAC;EAC1B,IAAMK,YAAY,GAAGH,GAAG,KAAK,GAAG,IAAIA,GAAG,KAAK,GAAG;EAC/C,IAAIG,YAAY,IAAIH,GAAG,KAAKP,GAAG,CAACQ,MAAM,CAACC,GAAG,CAAC,EAAE;IAC3C,OAAOT,GAAG,CAACI,KAAK,CAAC,CAAC,EAAEK,GAAG,CAAC;EAC1B;EACA,OAAOT,GAAG;AACZ;AAEO,SAASW,MAAMA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACrC,OAAOD,KAAK,CAACE,GAAG,CAAC,UAACC,IAAI,EAAK;IACzB,IAAMC,IAAI,GAAGD,IAAI,CAACC,IAAI;IACtB,IAAMC,UAAU,GACdD,IAAI,KAAK,SAAS,GACd;MACEA,IAAI,EAAJA,IAAI;MACJE,OAAO,EAAEH,IAAI,CAACG,OAAO,CAACC,WAAW,CAAC,CAAC;MACnCC,UAAU,EAAEC,gBAAgB,CAACN,IAAI,CAACK,UAAU,CAAC;MAC7CE,QAAQ,EAAEX,MAAM,CAACI,IAAI,CAACO,QAAQ,EAAET,OAAO;IACzC,CAAC,GACD;MAAEG,IAAI,EAAJA,IAAI;MAAEO,OAAO,EAAER,IAAI,CAACQ;IAAQ,CAAC;IACrC,IAAIV,OAAO,CAACW,gBAAgB,EAAE;MAC5BP,UAAU,CAACQ,QAAQ,GAAGV,IAAI,CAACU,QAAQ;IACrC;IACA,OAAOR,UAAU;EACnB,CAAC,CAAC;AACJ;AAEO,SAASI,gBAAgBA,CAACD,UAAU,EAAE;EAC3C,OAAOA,UAAU,CAACN,GAAG,CAAC,UAACY,SAAS,EAAK;IACnC,IAAMC,KAAK,GAAG5B,SAAS,CAAC2B,SAAS,CAACE,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC;IAC9C,IAAMC,GAAG,GAAGF,KAAK,CAAC,CAAC,CAAC;IACpB,IAAMG,KAAK,GAAG,OAAOH,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ,GAAGrB,OAAO,CAACqB,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;IACrE,OAAO;MAAEE,GAAG,EAAHA,GAAG;MAAEC,KAAK,EAALA;IAAM,CAAC;EACvB,CAAC,CAAC;AACJ"}